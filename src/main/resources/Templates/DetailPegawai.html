<!DOCTYPE html>
<!-- saved from url=(0156)file:///Users/savirasantoso/Documents/workspace-sts-3.9.5.RELEASE/hr-and-payroll-system/src/main/resources/templates/fragments/detailPegawaiOutsourcing.html -->
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

	<!-- script buat addrow -->
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
	<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
	
</head>

<body>
<nav th:replace="fragments/fragment :: navbar"></nav>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./detailPegawaiOutsourcing_files/jquery.dataTables.css">

    <style>
        /* table {
        table-layout: fixed;
        } */

        body {
            font-family: "Open Sans", sans-serif;
            line-height: 1.25;
        }

        hr {
            border-top: 1px solid rgb(37, 37, 37);
        }

        .tablecontainer {
            padding-top: 100px;
            padding-right: 300px;
            padding-bottom: 50px;
            padding-left: 100px;
        }

        table {
            border: 1px solid #ccc;
            border-collapse: collapse;
            table-layout: fixed;
            width: 100%;
        }

        table caption {
            font-size: 1.5em;
            margin: .5em 0 .75em;
        }

        table tr {
            border: 1px solid #ddd;
            padding: .35em;
        }

        table tr:nth-child(even) {
            background: #f8f8f8;
        }

        table th,
        table td {
            padding: .625em;
            text-align: left;
            border: 1px solid rgb(207, 207, 207)
        }

        table th {
            background: rgb(226, 226, 226);
            color: #fff;
            font-size: .85em;
            letter-spacing: .1em;
            text-transform: uppercase;

        }

        .nav-tabs {
            padding-right: 10%;
        }

        table td {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .history {
            border-collapse: collapse;
            width: 100%;
            color: black;
        }

        tr.history:hover {
            background-color: black;
        }
    
    	#header-ulasan{
    		display: flex;
    		justify-content: space-between;		
    	}
    
    </style>



    <Body>
        <h3 th:text="${pegawai.pelamar_id.nama_lengkap} + ' - ' + ${pegawai.nip}"></h3>
        <a href="#"> <span class="glyphicon glyphicon-circle-arrow-left"></span>
            <!--Belum berfungsi-->
            <!-- <hr> -->
            <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                    <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab"
                        aria-controls="nav-home" aria-selected="true">Informasi Umum</a>
                    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab"
                        aria-controls="nav-profile" aria-selected="false">Proyek</a>
                    <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab"
                        aria-controls="nav-contact" aria-selected="false">Track Record</a>
                    
                </div>
            </nav>
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                
                   <a th:href="'/pegawai/ubah/'+${pegawai.id}" class="btn btn-info btn-large"
                        style="float: right; margin-top:10px ; margin-right: 50px;">Ubah</a>
                    <div class="tablecontainer">
                        <table style="width:100%" id="table" class="table table-striped table-bordered dataTable">
                            <tbody>
                                <tr>
                                    <td style="width:50%" scope="row">No.Arsip</td>
                                    <td style="width:100%" th:text="${pegawai.no_arsip}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%" scope="row">NIP</td>
                                    <td style="width:100%" th:text="${pegawai.nip}"></td>
                                </tr>
                            </tbody>
                        </table>
                        <br>
                        <br>
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <thead>Data Pribadi</thead>
                                <tr>
                                    <td style="width:50%" scope="row">Nama Lengkap</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.nama_lengkap}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Nama Panggilan</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.nama_panggilan}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Jenis Kelamin</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.gender}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Tanggal Lahir</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.tanggal_lahir}"></td>
                                </tr>

                                <tr>
                                    <td style="width:50%">Status Marital</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.status_marital}"></td>
                                </tr>
                            </tbody>
                        </table>

                        <br>
                        <br>

                        <table class="table table-striped table-bordered">
                            <tbody>
                                <tr>
                                    <td style="width:50%" scope="row">Alamat</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.alamat}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Region</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.region}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Telepon</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.telepon}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">No Whatsapp</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.nomor_whatsapp}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">No Telepon Orang Terdekat</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.telepon_orang_terdekat}"></td>
                                </tr>
                            </tbody>
                        </table>

                        <br>
                        <br>

                        <!-- <h5>No.Identitas</h5> -->
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <thead>No.Identitas</thead>
                                <tr>
                                    <td style="width:50%" scope="row">No.KTP</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.no_ktp}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%" scope="row">No.PKWT</td>
                                    <td style="width:100%" th:text="${pegawai.pkwt}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">No.NPWP</td>
                                    <td style="width:100%" th:text="${pegawai.npwp}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">No.BPJS Tenagakerja</td>
                                    <td style="width:100%" th:text="${pegawai.bpjstk}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">No.BPJS Kesehatan</td>
                                    <td style="width:100%" th:text="${pegawai.bpjsk}"></td>
                                </tr>
                            </tbody>
                        </table>

                        <br>
                        <br>

                        <!-- <h5>Informasi Rekening</h5> -->
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <thead>Informasi Rekening</thead>
                                <tr>
                                    <td style="width:50%">Nama Bank</td>
                                    <td style="width:100%" th:text="${pegawai.nama_bank}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">No.Rekening</td>
                                    <td style="width:100%" th:text="${pegawai.no_rekening}"></td>
                                </tr>
                            </tbody>
                        </table>

                        <br>
                        <br>

                        <!-- <h5>Riwayat Pendidikan</h5> -->
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <thead>Riwayat Pendidikan</thead>
                                <tr>
                                    <td style="width:50%" scope="row">Pendidikan Terakhir</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.pendidikan_terakhir}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Nama Sekolah</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.nama_sekolah}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Tempat Sekolah</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.tempat_sekolah}"></td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Jurusan</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.jurusan}"></td>
                                </tr>
                                 <tr>
                                    <td style="width: 30%;">Tahun Lulus</td>
                                    <td style="width:100%" th:text="${pegawai.pelamar_id.lulusan_tahun}"></td>
                                </tr> 
                               <!-- <tr>
                               	<td style="width:100%" th:text="${#dates.format(#dates.createNow(), 'yyyy MMM dd ')}"></td>
                               	<td style="width:100%" th:text="${pegawai.end_date}"></td>
                               </tr> -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                    	<!-- <div class="card-body" style="display: flex; flex-direction:row;"> 
             				<form th:action="@{/pegawai/ubah}" method="GET">
			    				<input type=hidden name="idPegawai" th:value="${pegawai.id}" />
			    				<button value="submit" class="btn  btn-primary" style="margin-right:1rem;margin-top:0.5rem;">Ubah</button>
			 				</form>
						</div> -->
                    
                    
                     <a th:href="'/pegawai/ubah/'+${pegawai.id}" onClick="" class="btn btn-info btn-large" style="float: right; margin-top:10px ; margin-right: 50px;">Ubah</a>
                    <div class="tablecontainer">
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <tr>
                                    <td style="width:50%" scope="row">Proyek</td>
                                    <div th:if="${pegawai.status}">
                                       <td style="width:100%" th:if="${pegawai.status}" th:text="${pegawai.proyek.nama_proyek}"></td>
                                    </div>
                                    <div th:unless="${pegawai.status}">
                                       <td style="width:100%" th:unless="${pegawai.status}">None</td>
                                    </div>
                                </tr>
                                <tr>
                                    <td style="width:50%">Produk</td>
                                    <td style="width:100%" th:if="${pegawai.status}" th:text="${pegawai.produk.nama_produk}"></td>
                                    <td style="width:100%" th:unless="${pegawai.status}">None</td>
                                </tr>
                                <tr>
                                    <td style="width:50%">Jabatan</td>
                                    <td style="width:100%" th:if="${pegawai.status}" th:text="${pegawai.jabatan}"></td>
                                    <td style="width:100%" th:unless="${pegawai.status}">None</td>
                                </tr>
                            </tbody>
                        </table>
                        <br>
                        <br>
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <tr>
                                    <td style="width:50%">Join Date</td>
                                    <td style="width:100%"  th:if="${pegawai.status}" th:text="${pegawai.join_date}"></td>
                                    <td style="width:100%" th:unless="${pegawai.status}">-</td>
                                </tr>
                                <tr>
                                    <td style="width:50%">End Date</td>
                                    <td style="width:100%; color: red; "  th:if="${pegawai.status && expiredStatus == true}" th:text="${pegawai.end_date}"></td>
                                    <td style="width:100%;"  th:if="${pegawai.status && expiredStatus == false}" th:text="${pegawai.end_date}"></td>
                                    <td style="width:100%" th:unless="${pegawai.status}">None</td>
                                </tr>
                            </tbody>
                        </table>
                        <br>
                        <br>

                        <div class="card">
                            <h5 class="card-header">Riwayat Kerja</h5>
                            <div class="card-body">
                                <div class="history">
                                    <table>
                                        <tbody>
                                            <tr>
                                                <th>Proyek</th>
                                                <th>Produk</th>
                                                <th>Tanggal Mulai Kontrak</th>
                                                <th>Tanggal Selesai Kontrak</th>
                                             
                                            </tr>
                                            <tr th:each ="listRiwayat: ${riwayatPegawai}">
                                                <td border-bottom: 1px solid #ddd th:text="${listRiwayat.proyek.nama_proyek}" ></td>
                                                <td border-bottom: 1px solid #ddd th:text="${listRiwayat.produk.nama_produk}"></td>
                                                <td border-bottom: 1px solid #ddd th:text="${listRiwayat.join_date}"></td>
                                                <td border-bottom: 1px solid #ddd th:text="${listRiwayat.end_date}"></td>
                                                
                                            </tr> 
                                            <br>
                                            <br>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                	<div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
                		<div>
                		
                		
                		
                		</div>
                		<div id="feedback">
                			<div id="header-ulasan">
                				<h2>Ulasan Pegawai</h2>
                			<button id="tambah-ulasan">Tambahkan Ulasan</button> 
                				
                			</div>
    						<div id="tabel-ulasan">
    							<form id="list_ulasan">
    								<table  class="table order-list" >
    									<thead>
	    								<tr id="header-tabel">
	    									<th>Tanggal</th>
	    									<th>Proyek</th>
	    									<th>Feedback</th>
	    									<th>Tindakan</th>
	    								</tr>
    								</thead>
    								<tbody>
    									<tr id="body-tabel-ulasan" th:each="feedback, itemStat : *{list_of_feedback}">
    										<td th:text="${feedback.tanggal_pengisian_feedback}">tanggal</td>
    										<td th:text="${feedback.proyek.id}">proyek</td>
    										<td th:text="${feedback.feedback}">feedback</td>
    										<td>
    											<a>Ubah</a>
    											<a>Hapus</a>
    										</td>
    									</tr>
    								</tbody>
    								</table>
    								
    							</form>
    						</div>               		
                		</div>
                	</div>
                </div>    



                <script src="./detailPegawaiOutsourcing_files/jquery.min.js"></script>
                <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
                    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
                    crossorigin="anonymous"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
                    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
                    crossorigin="anonymous"></script>
                <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
                    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
                    crossorigin="anonymous"></script>
                <script type="text/javascript" charset="utf8"
                    src="./detailPegawaiOutsourcing_files/jquery.dataTables.js"></script>
                <script>
                $(document).ready(function () {
                    var counter = 0;

                    $("#tambah-ulasan").on("click", function () {
                    	console.log("tayo");
                    	var newRow = $("<tr>");
                        var cols = "";
						
                        cols += '<td><input type="Date" class="form-control"  name="tanggal_pengisian_feedback"/></td>';
                        cols += '<td><input type="text" class="form-control"  name="proyek"/></td>';
                        cols += '<td><input type="text" class="form-control"  name="feedback"/></td>';
						
                        cols += '<td><input type="button" class="ibtnSubmit btn btn-md btn-submit" value="Simpan">'
                        cols += '<input type="button" class="ibtnDel btn btn-md btn-danger "  value="Batal"></td>';
 						
                        newRow.append(cols);
                        $("table.order-list").append(newRow);
                        counter++;
                    });


                    $("table.order-list").on("click", ".ibtnDel", function (event) {
                        $(this).closest("tr").remove();       
                        counter -= 1
                    });
                    $("table.order-list").on("click", ".ibtnSubmit", function (event) {
                    	document.getElementById('list_ulasan').action = "${pegawai.id}+/feedback/submit";
                    	document.getElementById('list_ulasan').method = "POST";
                    	document.getElementById('list_ulasan').submit();
                    console.log("tayo");
                    });
                    
                });	
                
                
                    $(document).ready(function () {
                        $('#table').DataTable();
                    });
                    
                    

                    
                </script>
    </body>

</html>
